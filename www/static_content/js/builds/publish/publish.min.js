/*Created by Nuno Machado*/
cookSocial.InputFileBtnFunctionality=function(){"use strict";function a(a,b,c){this._type=a||"image",this._btn=b,this._image=c,this.IMAGE_EXTENSIONS=["png","jpg","gif"],this._init()}return a.prototype._displayImage=function(a){if(a.files&&a.files[0]){var b=new FileReader;b.readAsDataURL(a.files[0]),b.addEventListener("load",function(a){var b=a.target.result;this._image.src=b}.bind(this),!1)}},a.prototype._checkFileExtension=function(a){var b;"image"===this._type&&(b=this.IMAGE_EXTENSIONS);var c,d=b.length;for(c=0;c<d;c++)if(a===b[c])return!0;return!1},a.prototype._getFileProperties=function(a){var b=a.split("fakepath")[1],c=b.split(".")[1];return{fileName:b,extension:c}},a.prototype._btnChanged=function(a){var b=a.currentTarget.value,c=this._getFileProperties(b),d=this._checkFileExtension(c.extension);d?"image"===this._type&&this._displayImage(a.currentTarget):(a.currentTarget.value="",alert("Submeta um ficheiro de imagem vÃ¡lido (*.jpg, *.png, *.gif)"))},a.prototype._init=function(){this._btn.addEventListener("change",this._btnChanged.bind(this),!1)},a}(),cookSocial.CustomClass=function(){"use strict";function a(){this.INITIAL_VALUE=2,this._ingredientsMax=null,this._stepsMax=null,this._init()}return a.prototype._getInputFileBtnFunctionality=function(){var a=document.getElementsByClassName("input-file-btn")[0],b=document.getElementsByClassName("image-selected")[0];this._inputFile=new cookSocial.InputFileBtnFunctionality("image",a,b)},a.prototype._hide=function(a){a.div.style.display="none",a.input.value=""},a.prototype._show=function(a){a.div.style.display="block"},a.prototype._setInputNumber=function(a,b,c){var d;for(d=0;d<b;d++)d>=c?this._hide(a[d]):"none"===a[d].div.style.display&&this._show(a[d])},a.prototype._selectChange=function(a){var b="SELECT",c=a.currentTarget.key,d=parseInt(a.currentTarget.value),e=a.currentTarget.tagName;if(a.currentTarget&&e===b){var f,g;0===c?(f=this._ingredients,g=this._ingredientsMax):(f=this._steps,g=this._stepsMax),this._setInputNumber(f,g,d)}},a.prototype._addListeners=function(){var a,b=this._selects.length;for(a=0;a<b;a++)this._selects[a].key=a,this._selects[a].addEventListener("change",this._selectChange.bind(this),!1)},a.prototype._getInputDivs=function(a,b){var c,d=document.getElementsByClassName(a)[0],e=d.getElementsByClassName("label"),f=d.getElementsByTagName(b),g=e.length,h={};for(c=0;c<g;c++)h[c]={div:e[c],input:f[c]};return{obj:h,maxLength:g}},a.prototype._getPreSelectValues=function(){var a,b,c=this._selects.length,d=[];for(a=0;a<c;a++)b=""!==this._selects[a].getAttribute("data-pre-value")?this._selects[a].getAttribute("data-pre-value"):this.INITIAL_VALUE,this._selects[a].value=b,d.push(b);this._setInputNumber(this._ingredients,this._ingredientsMax,d[0]),this._setInputNumber(this._steps,this._stepsMax,d[1])},a.prototype._getReferences=function(){this._selects=document.getElementsByTagName("select");var a=this._getInputDivs("ingredients","input");this._ingredients=a.obj,this._ingredientsMax=a.maxLength;var b=this._getInputDivs("steps","textArea");this._steps=b.obj,this._stepsMax=b.maxLength},a.prototype._init=function(){this._getReferences(),this._getPreSelectValues(),this._addListeners(),this._getInputFileBtnFunctionality()},a}();